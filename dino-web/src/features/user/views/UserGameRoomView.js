import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { formatCredits } from "../../../utils/format";
import UserHeader from "../components/UserHeader";
import { USER_ROOM_CALLED_NUMBERS, USER_ROOM_SAMPLE_CARDS } from "../constants";
export function UserGameRoomView({ me, game, onLeave, onLogout, onNavigate, pendingTickets, onConfirmTickets, }) {
    const calledNumbers = USER_ROOM_CALLED_NUMBERS;
    return (_jsxs("div", { className: "user-room-shell", children: [_jsx(UserHeader, { view: "room", balance: me.balance, onNavigate: onNavigate, onLogout: onLogout, roomMode: true, onRequestExit: onLeave }), _jsxs("main", { className: "user-room-main", children: [_jsxs("header", { className: "user-room-header", children: [_jsxs("div", { children: [_jsxs("p", { className: "user-room-eyebrow", children: ["Ronda #", game.id.slice(0, 5)] }), _jsx("h2", { children: game.roomName }), _jsx("p", { className: "user-room-subtitle", children: game.description })] }), _jsxs("div", { className: "user-room-actions", children: [_jsxs("button", { type: "button", className: "user-room-button user-room-button--ghost", onClick: onLeave, children: [_jsx("span", { className: "material-symbols-outlined", "aria-hidden": "true", children: "close" }), "Salir de la sala"] }), _jsxs("button", { type: "button", className: "user-room-button", children: [_jsx("span", { className: "material-symbols-outlined", "aria-hidden": "true", children: "refresh" }), "Actualizar estado"] })] })] }), _jsxs("section", { className: "user-room-layout", children: [_jsxs("aside", { className: "user-room-sidebar", children: [_jsxs("div", { className: "user-room-heading", children: [_jsx("p", { className: "user-room-eyebrow", children: "Informaci\u00F3n" }), _jsx("h3", { children: "Pozo en juego" }), _jsx("p", { children: formatCredits(game.pot) })] }), _jsxs("div", { className: "user-room-stats", children: [_jsxs("div", { className: "user-room-stat", children: [_jsx("p", { children: "\u00DAltima bola" }), _jsx("strong", { children: calledNumbers.lastBall })] }), _jsxs("div", { className: "user-room-stat", children: [_jsx("p", { children: "Premio l\u00EDnea" }), _jsx("strong", { children: formatCredits(calledNumbers.linePrize) })] }), _jsxs("div", { className: "user-room-stat", children: [_jsx("p", { children: "Premio bingo" }), _jsx("strong", { children: formatCredits(calledNumbers.bingoPrize) })] })] }), _jsxs("ul", { className: "user-room-sidebar-list", children: [_jsxs("li", { children: [_jsx("p", { children: "Cartones vendidos" }), _jsx("strong", { children: game.sold })] }), _jsxs("li", { children: [_jsx("p", { children: "Precio" }), _jsx("strong", { children: formatCredits(game.price) })] }), _jsxs("li", { children: [_jsx("p", { children: "Reparto" }), _jsx("strong", { children: game.breakdown })] })] }), _jsxs("button", { className: "user-room-call", type: "button", children: [_jsx("span", { className: "material-symbols-outlined", "aria-hidden": "true", children: "campaign" }), "Pedir verificaci\u00F3n"] })] }), _jsxs("section", { className: "user-room-center", children: [_jsx("h3", { className: "user-room-section-title", children: "Tus cartones" }), _jsx("div", { className: "user-room-cardgrid", children: USER_ROOM_SAMPLE_CARDS.map((card, index) => (_jsxs("div", { className: "user-room-card", children: [_jsxs("div", { className: "user-room-card-header", children: [_jsxs("p", { children: ["Cart\u00F3n #", index + 1] }), _jsxs("span", { children: ["ID: ", Math.random().toString(36).slice(2, 8).toUpperCase()] })] }), _jsx("div", { className: "user-room-card-body", children: card.map((row, rowIdx) => (_jsx("div", { className: "user-room-card-row", children: row.map((cell, cellIdx) => {
                                                            const isFree = cell === 0;
                                                            const isHit = calledNumbers.highlights.has(cell);
                                                            return (_jsx("div", { className: [
                                                                    "user-room-card-cell",
                                                                    isFree ? "user-room-card-cell--free" : "",
                                                                    isHit ? "user-room-card-cell--hit" : "",
                                                                ]
                                                                    .filter(Boolean)
                                                                    .join(" "), children: isFree ? (_jsx("span", { className: "material-symbols-outlined", "aria-hidden": "true", children: "star" })) : (cell) }, `${rowIdx}-${cellIdx}`));
                                                        }) }, rowIdx))) })] }, `card-${index}`))) })] }), _jsxs("aside", { className: "user-room-called", children: [_jsx("h3", { className: "user-room-section-title", children: "N\u00FAmeros cantados" }), _jsx("div", { className: "user-room-called-grid", children: Object.entries(calledNumbers.board).map(([letter, numbers]) => (_jsxs("div", { className: "user-room-called-column", children: [_jsx("span", { children: letter }), numbers.map((number) => {
                                                    const isHit = calledNumbers.highlights.has(number);
                                                    return (_jsx("span", { className: isHit ? "user-room-called-number user-room-called-number--hit" : "user-room-called-number", children: number }, `${letter}-${number}`));
                                                })] }, letter))) })] })] }), _jsx("div", { className: "user-room-toast", children: _jsx("p", { children: "Modo demo: pronto ver\u00E1s aqu\u00ED tus logros en vivo." }) })] }), pendingTickets > 0 && (_jsx("div", { className: "user-room-modal", children: _jsxs("div", { className: "user-room-modal__panel", children: [_jsx("h4", { children: "Selecciona cartones" }), _jsx("p", { children: "\u00BFCon cu\u00E1ntos cartones quieres entrar a esta partida?" }), _jsx("div", { className: "user-room-modal__options", children: [1, 2].map((option) => (_jsxs("button", { type: "button", onClick: () => onConfirmTickets(option), className: "user-room-modal__option", children: [option, " cart\u00F3n", option > 1 ? "es" : ""] }, option))) }), _jsx("button", { type: "button", className: "user-room-modal__cancel", onClick: onLeave, children: "Cancelar" })] }) }))] }));
}
export default UserGameRoomView;
